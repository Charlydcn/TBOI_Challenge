{% extends 'base.html.twig' %}

{% block title %}Play a challenge{% endblock %}

{% block metaTag %}
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('/css/challenge/show.css')}}">
    {% endblock %}

{% block body %}

    <div id="page">
        
        <img src="{{ asset('/img/misc/page_blood_empty.webp')}}" alt="image of a notebook page with blood on it">

        <div>
            <div id="play-result">
    
                <div id="character">
                    {% if character is defined %}
                        {# img #}
                        <img class="pixelated" src="{{ asset('/img/characters/' ~ character.img )}}" alt="{{ character.name }}'s image">
                        {# text img #}
                        {# AJOUTER LES TAINTED NAMES #}
                        <img src="{{ asset('/img/characters/text/' ~ character.img|replace({"tainted_": ""}))}}" alt="{{ character.name }}'s name">
                        {# infos box on hover #}
                        <p class="hover-infos">{{ character.name }}</p>
                    {% endif %}
                </div>
    
                <div id="boss">
            
                    {% if boss is defined %}
                        {# text img #}
                        <img src="{{ asset('/img/bosses/text/' ~ boss.img)}}" alt="{{ boss.name }}'s name">
                        {# img #}
                        <img src="{{ asset('/img/bosses/' ~ boss.img )}}" alt="{{ boss.name }}'s image">
                        {# infos box on hover #}
                        <p class="hover-infos">{{ boss.name }}</p>
                    {% endif %}
                </div>
    
                <div id="restrictions-result">
                    {% if restrictions is defined %}
                        {% for restriction in restrictions %}
                        <div>
                            {# img #}
                            <img src="{{ asset('/img/restrictions/' ~ restriction.img )}}" alt="{{ restriction.name }}'s image">
                            {# infos box on hover #}
                            <p class="hover-infos">{{ restriction.name }}</p>
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
    
            </div>
    
            <div id="btns">
                {# step 1 btns #}
                <div>
                    <a href="{{ path('play_challenge', {'id': challenge.id}) }}">
                        <img src="{{ asset('img/text/play.webp')}}" alt="The word PLAY">
                    </a>
                </div>

                {# step 2 btns #}
                <div class="hidden">
                    <a href="{{ path('win_challenge', {'id': challenge.id}) }}">
                        <img src="{{ asset('img/text/win.webp')}}" alt="The word WIN">
                    </a>

                    <a href="{{ path('loose_challenge', {'id': challenge.id}) }}">
                        <img src="{{ asset('img/text/loose.webp')}}" alt="The word LOOSE">
                    </a>
                </div>                
            </div>
        </div>
    </div>

    <div id="infos">

        <div id="characters">
            {% for character in challenge.characters %}

                <div>
                    {# img #}
                    <img src="{{ asset('/img/characters/' ~ character.img )}}" alt="{{ character.name }}'s image">
                    {# infos box on hover #}
                    <p class="hover-infos">{{ character.name }}</p>
                </div>

            {% endfor %}
        </div>

        <div id="bosses">
            {% for boss in challenge.bosses %}
                <div>
                    {# img #}
                    <img src="{{ asset('/img/completion_marks/' ~ boss.img) }}" alt="{{ boss.name }}'s completion mark">
                    {# infos box on hover #}
                    <p class="hover-infos">{{ boss.name }}</p>
                </div>
            {% endfor %}
        </div>

        <div id="restrictions">
            {% for restriction in challenge.restrictions %}
                <div>
                    {# img #}
                    <img src="{{ asset('/img/restrictions/' ~ restriction.img )}}" alt="{{ restriction.name }}'s image">
                    {# infos box on hover #}
                    <p class="hover-infos">{{ restriction.name }}</p>
                </div>
            {% endfor %}

            <p>Restrictions chance : {{ challenge.restrictionsChance }}%</p>
        </div>        

        <div id="streak">
            {% if challenge.streak is defined %}
                <p>Win-streak : {{ challenge.streak }}</p>
            {% endif %}
        </div>
       
    </div>

{% endblock %}
